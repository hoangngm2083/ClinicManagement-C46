<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kết quả khám bệnh</title>
    <style>
        /* ===========================
       FORM FIELDS (TINH CHỈNH MẠNH)
       =========================== */
       .exam-result-container {
       font-size: 14px;
       color: #333;
       width: 100%;
       }
       .form-field {
       margin-bottom: 18px;
       }
       .field-label {
       font-weight: 600;
       margin-bottom: 6px;
       display: block;
       color: #2196F3; /* Dùng màu xanh để làm nổi bật tên trường */
       font-size: 14px;
       }
       .field-value {
       /* Đã đơn giản hóa */
       padding: 12px 15px;
       background: #fcfcfc; /* Màu trắng gần như tinh khiết */
       border-radius: 6px;
       border: 1px solid #eee; /* Viền rất mỏng và nhẹ */
       white-space: pre-line;
       font-weight: 500;
       box-shadow: inset 0 1px 3px rgba(0,0,0,0.03); /* Bóng đổ vào nhẹ */
       }
       /* Override cho field-value chứa ảnh - bỏ padding và background */
       .field-value.image-field-value {
       padding: 0 !important;
       margin: 0 !important;
       background: transparent !important;
       border: none !important;
       box-shadow: none !important;
        border-radius: 0 !important;
        }
        /* Bỏ padding của exam-result-container khi chứa ảnh */
        .exam-result-container:has(.image-field-value) {
        padding: 0 !important;
        margin: 0 !important;
        }
        /* Bỏ padding của form-field khi chứa ảnh */
        .form-field:has(.image-field-value) {
        margin: 0 !important;
        }
        /* ===========================
       FORM PANEL / SECTION (TINH CHỈNH MẠNH)
       =========================== */
       .panel-title {
       font-size: 20px; /* Tăng kích thước */
       font-weight: 700;
       color: #333; /* Chuyển sang màu đen để trông nghiêm túc */
       margin-bottom: 20px;
       border-bottom: 2px solid #2196F3; /* Gạch chân màu xanh, đậm hơn */
       padding-bottom: 10px;
       }
       /* ===========================
       COLUMNS (Giữ nguyên)
       =========================== */
       .form-columns {
       display: flex;
       gap: 20px; /* Tăng khoảng cách giữa các cột */
       width: 100%;
       }
       .form-column {
       flex: 1;
       }
       /* ===========================
       IMAGES (Table-based grid layout cho email compatibility)
       Hiển thị tối đa 2 ảnh mỗi hàng, ảnh tràn đầy không có viền dày
       =========================== */
       .medical-image-grid table {
       width: 100%;
       border-collapse: separate;
       border-spacing: 8px; /* Khoảng cách giữa các ảnh */
       margin: 0;
       padding: 0;
       }
       .medical-image-grid td {
       width: 50%; /* 2 cột mỗi hàng */
       vertical-align: top;
       padding: 0;
       }
       .medical-image-grid .image-cell {
       width: 100%;
       height: 250px; /* Tăng chiều cao để ảnh rõ hơn */
       border-radius: 8px;
       border: none; /* Bỏ viền */
       padding: 0; /* Bỏ padding để ảnh tràn đầy */
       background: transparent; /* Bỏ background trắng */
       overflow: hidden;
       display: block;
       box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* Thêm shadow nhẹ thay vì border */
       }
       .medical-image-grid .image-cell img {
       width: 100%;
       height: 100%;
       object-fit: cover; /* Ảnh fill đầy, crop nếu cần */
       border-radius: 8px;
       display: block;
       margin: 0;
       padding: 0;
       }
       /* For single image, center it and make it larger */
       .medical-image-grid td:only-child {
       width: 100%; /* Full width nếu chỉ có 1 ảnh */
       max-width: 100%;
       }
       .medical-image-grid td:only-child .image-cell {
       max-width: 500px; /* Giới hạn width nếu chỉ có 1 ảnh */
       margin: 0 auto;
       height: 350px; /* Cao hơn cho ảnh đơn */
       }
    </style>
</head>
<body style="margin: 0; padding: 0; font-family: Arial, Helvetica, sans-serif; background-color: #f4f4f4;">
<!-- Main container table -->
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f4f4f4; padding: 25px 0;">
    <tr>
        <td align="center">
            <!-- Content wrapper -->
            <table width="780" cellpadding="0" cellspacing="0" border="0"
                   style="background-color: #ffffff; max-width: 780px;">

                <!-- Header -->
                <tr>
                    <td style="padding: 35px 35px 18px 35px; text-align: center; border-bottom: 3px solid #2196F3;">
                        <h1 style="margin: 0; color: #2196F3; font-size: 30px; font-weight: bold;">KẾT QUẢ KHÁM
                            BỆNH</h1>
                    </td>
                </tr>

                <!-- Info section -->
                <tr>
                    <td style="padding: 28px 35px;">
                        <table width="100%" cellpadding="0" cellspacing="0" border="0"
                               style="background-color: #f8f9fa; padding: 18px; border-radius: 8px;">
                            <!-- Patient name -->
                            <tr>
                                <td style="padding: 6px 0;">
                                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                        <tr>
                                            <td style="font-weight: 600; color: #555555; font-size: 14px;">Khách hàng:
                                            </td>
                                            <td align="right" style="font-weight: 500; color: #222222; font-size: 14px;"
                                                th:text="${patientName}">Nguyễn Văn A
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>

                            <!-- Examination ID -->
                            <tr>
                                <td style="padding: 6px 0;">
                                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                        <tr>
                                            <td style="font-weight: 600; color: #555555; font-size: 14px;">Mã hồ sơ
                                                khám:
                                            </td>
                                            <td align="right" style="font-weight: 500; color: #222222; font-size: 14px;"
                                                th:text="${examinationId}">EXAM-001
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>

                            <!-- Completion date -->
                            <tr>
                                <td style="padding: 6px 0;">
                                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                        <tr>
                                            <td style="font-weight: 600; color: #555555; font-size: 14px;">Ngày hoàn
                                                thành:
                                            </td>
                                            <td align="right" style="font-weight: 500; color: #222222; font-size: 14px;"
                                                th:text="${completionDate}">26/11/2025 20:00
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>

                <!-- Results section header -->
                <tr>
                    <td style="padding: 0 35px;">
                        <h2 style="color: #2196F3; border-bottom: 2px solid #2196F3; padding-bottom: 8px; margin: 0 0 25px 0; font-size: 24px; font-weight: 700;">
                            Chi tiết kết quả</h2>
                    </td>
                </tr>

                <!-- Results items (loop) -->
                <tr th:each="item : ${resultItems}">
                    <td style="padding: 0 35px 25px 35px;">
                        <table width="100%" cellpadding="0" cellspacing="0" border="0"
                               style="border: 1px solid #e0e0e0; background-color: #ffffff;">

                            <!-- Service name -->
                            <tr>
                                <td style="padding: 25px 25px 10px 25px;">
                                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                        <tr>
                                            <td style="font-size: 16px; color: #333333; padding-bottom: 10px;">
                                                <span style="font-weight: 500; color: #666666;">Dịch vụ thực hiện: </span>
                                                <span style="color: #222222; font-weight: 700;"
                                                      th:text="${item.serviceName}">Khám tổng quát</span>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>

                            <!-- Doctor name -->
                            <tr>
                                <td style="padding: 0 25px 20px 25px; border-bottom: 2px solid #2196F3;">
                                    <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                        <tr>
                                            <td style="font-size: 16px; color: #333333; padding-bottom: 10px;">
                                                <span style="font-weight: 500; color: #666666;">Bác sĩ thực hiện: </span>
                                                <span style="color: #222222; font-weight: 700;"
                                                      th:text="${item.doctorName}">BS. Nguyễn Văn A</span>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>

                            <!-- Result content (dynamic HTML) -->
                            <tr>
                                <td style="padding: 0;">
                                    <div style="font-size: 14px; color: #333333; line-height: 1.55; padding: 20px 25px 25px 25px;"
                                         th:utext="${item.resultHtmlContent}">
                                        <!-- Dynamic content will be inserted here -->
                                    </div>
                                </td>
                            </tr>

                        </table>
                    </td>
                </tr>

                <!-- Footer -->
                <tr>
                    <td style="padding: 20px 35px 35px 35px; border-top: 1px solid #dddddd; text-align: center;">
                        <p style="margin: 0 0 10px 0; font-size: 14px; color: #777777; line-height: 1.6;">
                            <strong style="color: #e65100; font-weight: 700;">Lưu ý:</strong> Đây là kết quả khám sơ bộ.
                            Vui lòng liên hệ với bác sĩ để được tư vấn chi tiết.
                        </p>
                        <p style="margin: 0; font-size: 14px; color: #777777; line-height: 1.6;">
                            Cảm ơn quý khách đã tin tưởng sử dụng dịch vụ của chúng tôi!
                        </p>
                    </td>
                </tr>

            </table>
        </td>
    </tr>
</table>
</body>
</html>